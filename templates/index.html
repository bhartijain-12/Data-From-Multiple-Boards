<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Email Draft UI</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f7fa;
      padding: 20px;
    }
    .email-container {
      background: #fff;
      border-radius: 12px;
      padding: 20px;
      max-width: 700px;
      margin: auto;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .email-header {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 10px;
      color: #333;
    }
    .subject {
      font-weight: bold;
      margin-bottom: 15px;
      color: #222;
    }
    .email-body {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 15px;
      min-height: 200px;
      background: #fafafa;
      white-space: pre-wrap;
    }
    .actions {
      margin-top: 20px;
      display: flex;
      gap: 12px;
    }
    button {
      padding: 10px 18px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
      font-size: 14px;
    }
    .save {
      background: #f0ad4e;
      color: white;
    }
    .send {
      background: #28a745;
      color: white;
    }
    .meta {
      margin-top: 20px;
      font-size: 13px;
      color: #666;
    }
  </style>
</head>
<body>
  <div class="email-container">
    <div class="email-header">Generated Email</div>
    
    <div class="subject" id="email-subject">
      Subject: Thank you for your feedback!
    </div>
    
    <div class="email-body" id="email-body" contenteditable="true">
Hi CUST-6002,

Thank you for your wonderful feedback regarding our service speed and reliability. We are thrilled to hear that you are very happy with your experience, and we truly appreciate your loyalty.

To ensure your continued satisfaction, hereâ€™s what we will do:
- Acknowledge your positive feedback about speed and reliability.
- Offer personalized support to assist you further.
- Provide incentives or loyalty rewards to encourage your continued engagement.
- Follow up regularly to address any concerns and maintain our connection.

We are grateful for your trust and look forward to serving you even better in the future. Please feel free to reach out anytime!

Warm regards,
[Your Companyâ€™s Support Team]
    </div>

    <div class="actions">
      <button class="save" onclick="saveDraft()">ðŸ’¾ Save as Draft</button>
      <button class="send" onclick="sendEmail()">ðŸ“¨ Send</button>
    </div>

    <div class="meta">
      <strong>Item ID:</strong> <span id="item-id-display"></span>
    </div>
  </div>

  <script>
    // Injected from Flask backend
    const ITEM_ID = "{{ item_id }}";

    // Display item_id in the footer
    document.addEventListener("DOMContentLoaded", () => {
      document.getElementById("item-id-display").innerText = ITEM_ID || "(not provided)";
    });

    function saveDraft() {
      const subject = document.getElementById("email-subject").innerText;
      const body = document.getElementById("email-body").innerText;

      console.log("Saving Draft for Item:", ITEM_ID, subject, body);
      alert("Draft saved for Item " + ITEM_ID + " âœ…");

      // Close the current tab
      window.open('', '_self').close();
    }

    function sendEmail() {
      const subject = document.getElementById("email-subject").innerText;
      const body = document.getElementById("email-body").innerText;

      console.log("Sending Email for Item:", ITEM_ID, subject, body);
      alert("Email sent for Item " + ITEM_ID + " ðŸš€");

      // Close the current tab
      window.open('', '_self').close();
    }
  </script>
</body>
</html>
